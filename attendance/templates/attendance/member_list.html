{% extends 'attendance/base.html' %}
<br>

{% block content %}

<h1 style="text-align: center;">🙋 Members List</h1>

<!-- Search form -->
<center>
    <form method="GET" action="{% url 'member_list' %}" style="margin-bottom: 1.5rem;">
        <input type="text" name="search" value="{{ search_query }}" placeholder="Search members"
               style="padding: 10px; width: 400px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc;" />
        <button type="submit" style="padding: 10px 20px; font-size: 16px; border-radius: 5px;">🔍 Search</button>
    </form>
</center>

<!-- Members Table -->
{% if members %}
    <div style="display: flex; justify-content: center;">
        <table border="1" cellpadding="8" cellspacing="0" width="70%" style="font-size: 14px;">
            <thead style="background-color: #f0f0f0;">
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Work</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for member in members %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ member.name }}</td>
                        <td>{{ member.phone|default:"-" }}</td>
                        <td>{{ member.work|default:"-" }}</td>
                        <td>
                            <form method="POST" style="display:inline;">
                                {% csrf_token %}
                                <button type="submit" name="delete" value="{{ member.id }}">Delete  ❌ </button>
                              </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <p style="text-align: center;">No members found.</p>
{% endif %}

<!-- Pagination Links -->
<div style="margin-top: 1rem; text-align: center;">
    {% if members.has_previous %}
        <a href="?page=1{% if search_query %}&search={{ search_query }}{% endif %}">First</a>
        <a href="?page={{ members.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}">Previous</a>
    {% endif %}

    <strong>Page {{ members.number }} of {{ members.paginator.num_pages }}</strong>

    {% if members.has_next %}
        <a href="?page={{ members.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}">Next</a>
        <a href="?page={{ members.paginator.num_pages }}{% if search_query %}&search={{ search_query }}{% endif %}">Last</a>
    {% endif %}
</div>

{% endblock %}


